{% extends 'base.html' %}
{% load static %}

{% block title %}Administraci√≥n del Sistema - DocTrac{% endblock %}

{% block extra_css %}
<style>
    .admin-card {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        transition: transform 0.3s ease;
    }
    
    .admin-card:hover {
        transform: translateY(-5px);
    }
    
    .admin-icon {
        font-size: 3rem;
        margin-bottom: 1rem;
    }
    
    .stats-card {
        background: white;
        border: 1px solid #e9ecef;
        border-radius: 10px;
        padding: 1.5rem;
        text-align: center;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .stat-number {
        font-size: 2rem;
        font-weight: bold;
        color: #495057;
    }
    
    .stat-label {
        color: #6c757d;
        font-size: 0.9rem;
        text-transform: uppercase;
        letter-spacing: 1px;
    }
    
    .section-title {
        color: #495057;
        font-weight: 600;
        margin-bottom: 1.5rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid #e9ecef;
    }
</style>
{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    <div class="row mb-4">
        <div class="col-12">
            <h1 class="display-4 text-center mb-0">üéØ Administraci√≥n del Sistema</h1>
            <p class="text-center text-muted">Panel de control para gesti√≥n de entidades, categor√≠as y carpetas</p>
        </div>
    </div>

    <!-- Estad√≠sticas -->
    <div class="row mb-5">
        <div class="col-md-3 mb-3">
            <div class="stats-card">
                <div class="stat-number">{{ stats.total_entities }}</div>
                <div class="stat-label">üë• Entidades</div>
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <div class="stats-card">
                <div class="stat-number">{{ stats.total_categories }}</div>
                <div class="stat-label">üè∑Ô∏è Categor√≠as</div>
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <div class="stats-card">
                <div class="stat-number">{{ stats.total_documents }}</div>
                <div class="stat-label">üìÑ Documentos</div>
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <div class="stats-card">
                <div class="stat-number">{{ stats.total_document_types }}</div>
                <div class="stat-label">ÔøΩ Tipos de Documentos</div>
            </div>
        </div>
    </div>

    <!-- Acciones Principales -->
    <div class="row mb-5">
        <div class="col-12">
            <h3 class="section-title">‚öôÔ∏è Acciones Principales</h3>
        </div>
        <div class="col-md-4 mb-3">
            <div class="card admin-card h-100">
                <div class="card-body text-center">
                    <div class="admin-icon">üë•</div>
                    <h4>Gesti√≥n de Entidades</h4>
                    <p class="mb-3">Administrar entidades del sistema</p>
                    <a href="{% url 'admin_manage_entities' %}" class="btn btn-light btn-lg">
                        <i class="fas fa-users"></i> Gestionar Entidades
                    </a>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-3">
            <div class="card admin-card h-100">
                <div class="card-body text-center">
                    <div class="admin-icon">üè∑Ô∏è</div>
                    <h4>Gesti√≥n de Categor√≠as</h4>
                    <p class="mb-3">Configurar categor√≠as y su aplicaci√≥n</p>
                    <a href="{% url 'admin_manage_categories' %}" class="btn btn-light btn-lg">
                        <i class="fas fa-tags"></i> Gestionar Categor√≠as
                    </a>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-3">
            <div class="card admin-card h-100">
                <div class="card-body text-center">
                    <div class="admin-icon">ÔøΩ</div>
                    <h4>Tipos de Documentos</h4>
                    <p class="mb-3">Gestionar tipos de documentos por categor√≠a</p>
                    <a href="{% url 'admin_manage_document_types' %}" class="btn btn-light btn-lg">
                        <i class="fas fa-file-alt"></i> Gestionar Tipos
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Fila adicional para m√°s acciones -->
    <div class="row mb-5">
        <div class="col-12">
            <h3 class="section-title">üîß Herramientas del Sistema</h3>
        </div>
        <div class="col-md-6 mb-3">
            <div class="card admin-card h-100">
                <div class="card-body text-center">
                    <div class="admin-icon">ÔøΩüìÅ</div>
                    <h4>Sistema de Carpetas</h4>
                    <p class="mb-3">Administrar estructura de carpetas</p>
                    <a href="{% url 'admin_rebuild_folders' %}" class="btn btn-light btn-lg" 
                       onclick="return confirm('¬øEst√° seguro de reconstruir todas las carpetas?')">
                        <i class="fas fa-folder-plus"></i> Reconstruir Carpetas
                    </a>
                </div>
            </div>
        </div>
        <div class="col-md-6 mb-3">
            <div class="card admin-card h-100">
                <div class="card-body text-center">
                    <div class="admin-icon">ÔøΩ</div>
                    <h4>Sincronizar WorkFolder</h4>
                    <p class="mb-3">Procesar documentos pendientes de la carpeta de trabajo</p>
                    <a href="{% url 'documents:admin_sync_workfolder' %}" class="btn btn-light btn-lg">
                        <i class="fas fa-sync-alt"></i> Revisar WorkFolder
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Informaci√≥n del Sistema -->
    <div class="row">
        <div class="col-12">
            <h3 class="section-title">üìä Informaci√≥n del Sistema</h3>
        </div>
        <div class="col-md-6">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">üîÑ Nuevo Orden de Categorizaci√≥n</h5>
                </div>
                <div class="card-body">
                    <ol class="list-group list-group-flush">
                        <li class="list-group-item d-flex align-items-center">
                            <span class="badge bg-primary rounded-pill me-3">1</span>
                            <strong>üë§ Entidades</strong> <span class="text-muted ms-auto">(PRIMERO)</span>
                        </li>
                        <li class="list-group-item d-flex align-items-center">
                            <span class="badge bg-secondary rounded-pill me-3">2</span>
                            <strong>üè∑Ô∏è Categor√≠a</strong>
                        </li>
                        <li class="list-group-item d-flex align-items-center">
                            <span class="badge bg-info rounded-pill me-3">3</span>
                            <strong>üìÑ Tipo de Documento</strong>
                        </li>
                        <li class="list-group-item d-flex align-items-center">
                            <span class="badge bg-success rounded-pill me-3">4</span>
                            <strong>üìÖ Fecha del Documento</strong>
                        </li>
                    </ol>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">‚úÖ Funcionalidades Activas</h5>
                </div>
                <div class="card-body">
                    <ul class="list-unstyled mb-0">
                        <li class="mb-2"><i class="fas fa-check text-success me-2"></i> Carpetas autom√°ticas por entidad</li>
                        <li class="mb-2"><i class="fas fa-check text-success me-2"></i> Subcarpetas de categor√≠as</li>
                        <li class="mb-2"><i class="fas fa-check text-success me-2"></i> Monitoreo autom√°tico de carpetas</li>
                        <li class="mb-2"><i class="fas fa-check text-success me-2"></i> Sincronizaci√≥n cada 5 minutos</li>
                        <li class="mb-2"><i class="fas fa-check text-success me-2"></i> Procesamiento autom√°tico de PDFs</li>
                        <li class="mb-0"><i class="fas fa-check text-success me-2"></i> Sistema de administraci√≥n web</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Acciones R√°pidas -->
    <div class="row mt-4">
        <div class="col-12">
            <div class="card">
                <div class="card-header bg-warning text-dark">
                    <h5 class="mb-0">‚ö° Acciones R√°pidas</h5>
                </div>
                <div class="card-body">
                    <div class="d-flex flex-wrap gap-2">
                        <a href="{% url 'documents:document_list' %}" class="btn btn-outline-primary">
                            <i class="fas fa-list"></i> Ver Documentos
                        </a>
                        <a href="{% url 'admin_create_entity' %}" class="btn btn-outline-success">
                            <i class="fas fa-user-plus"></i> Nueva Entidad
                        </a>
                        <a href="{% url 'admin_create_category' %}" class="btn btn-outline-info">
                            <i class="fas fa-tag"></i> Nueva Categor√≠a
                        </a>
                        <a href="{% url 'admin_create_document_type' %}" class="btn btn-outline-warning">
                            <i class="fas fa-file-alt"></i> Nuevo Tipo de Documento
                        </a>
                        <a href="{% url 'documents:admin_sync_workfolder' %}" class="btn btn-outline-danger">
                            <i class="fas fa-sync-alt"></i> Sincronizar WorkFolder
                        </a>
                        <button type="button" class="btn btn-outline-secondary" onclick="location.reload()">
                            <i class="fas fa-chart-bar"></i> Actualizar Estad√≠sticas
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Animaciones para las tarjetas de estad√≠sticas
    const statNumbers = document.querySelectorAll('.stat-number');
    
    statNumbers.forEach(function(element) {
        const finalNumber = parseInt(element.textContent);
        element.textContent = '0';
        
        let current = 0;
        const increment = finalNumber / 50;
        const timer = setInterval(function() {
            current += increment;
            if (current >= finalNumber) {
                current = finalNumber;
                clearInterval(timer);
            }
            element.textContent = Math.floor(current);
        }, 20);
    });
    
    // Efecto hover para las tarjetas de administraci√≥n
    const adminCards = document.querySelectorAll('.admin-card');
    adminCards.forEach(function(card) {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-10px) scale(1.02)';
            this.style.boxShadow = '0 10px 25px rgba(0,0,0,0.2)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0) scale(1)';
            this.style.boxShadow = 'none';
        });
    });
});
</script>
{% endblock %}